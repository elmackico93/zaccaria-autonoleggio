'use client';

import { useEffect } from 'react';
import { useRouter } from 'next/navigation';

/**
 * Client component for section navigation
 * This handles the client-side scrolling to sections with proper URL handling
 */
export default function SectionNavigation({ sectionId }) {
  const router = useRouter();
  
  useEffect(() => {
    if (!sectionId) return;
    
    // Small delay to ensure DOM is ready
    const timer = setTimeout(() => {
      const element = document.getElementById(sectionId);
      if (!element) return;
      
      const navbarHeight = document.getElementById('navbar')?.offsetHeight || 0;
      const offset = 20; // Additional offset for spacing
      const targetPosition = element.getBoundingClientRect().top + window.scrollY - navbarHeight - offset;
      
      // Scroll to the section
      window.scrollTo({
        top: targetPosition,
        behavior: 'smooth'
      });
      
      // Update the URL without triggering navigation
      if (window.history && window.location.pathname === '/') {
        window.history.replaceState(null, '', `/${sectionId}`);
      }
    }, 100);
    
    return () => clearTimeout(timer);
  }, [sectionId, router]);
  
  return null; // This component doesn't render anything visible
}
